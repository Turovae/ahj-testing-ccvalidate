!function(){"use strict";class t{constructor(t){this.type=t,this.element=null,this.container=null,this.card=null,this.create()}create(){this.element=document.createElement("li"),this.card=document.createElement("span"),this.card.classList.add("card"),this.card.classList.add(this.type.toLowerCase()),this.card.textContent=this.type,this.element.appendChild(this.card)}bindToDom(t){this.container=t,this.container.appendChild(this.element)}has(t){return t.toLowerCase()===this.type.toLowerCase()}disable(){this.card.classList.add("card-disabled")}enable(){this.card.classList.remove("card-disabled")}}class e{constructor(){this.element=null,this.container=null,this.cardTypes=["Visa","MasterCard","JCB","DinersClub","AmericanExpress","Maestro","Discover","UnionPay","Mir"],this.cards=[],this.create()}create(){this.element=document.createElement("ul"),this.element.classList.add("cards"),this.appendCards(this.cardTypes)}bindToDOM(t){this.container=t,this.container.appendChild(this.element)}appendCards(e){e.forEach((e=>{const s=new t(e);this.cards.push(s),s.bindToDom(this.element)}))}disableCardsExcept(t){t?this.cards.forEach((e=>{e.has(t)?e.enable():e.disable()})):this.enableCards()}enableCards(){this.cards.forEach((t=>{t.enable()}))}}class s{constructor(){this.element=null,this.container=null,this.inputEl=null,this.btnEl=null,this.msgEl=null,this.validate=this.validate.bind(this),this.typeField=this.typeField.bind(this),this.controlledEl=null,this.lastDeterminedPaySystem=null,this.create()}create(){this.element=document.createElement("form"),this.element.classList.add("validate-form"),this.inputEl=document.createElement("input"),this.inputEl.classList.add("validate-input"),this.inputEl.type="text",this.inputEl.placeholder="Credit card number",this.inputEl.name="ccnumber",this.element.appendChild(this.inputEl),this.btnEl=document.createElement("button"),this.btnEl.classList.add("validate-btn"),this.btnEl.textContent="Click to validate",this.element.appendChild(this.btnEl),this.element.addEventListener("submit",this.validate),this.inputEl.addEventListener("input",this.typeField)}bindToDOM(t){this.container=t,this.container.appendChild(this.element)}bindControlled(t){this.controlledEl=t}showMsg(t){this.msgEl||this.createMsgEl(),this.msgEl.textContent=t,this.msgEl.classList.remove("validate-tooltip-invalid"),this.element.appendChild(this.msgEl)}createMsgEl(){this.msgEl=document.createElement("div"),this.msgEl.classList.add("validate-tooltip")}validate(t){t.preventDefault(),""!==this.inputEl.value.replace(/\D/g,"")?!function(t){let e=0;const s=String(t).replace(/\D/g,"");if(0===s.length)return!1;const i=s.length%2;for(let t=0;t<s.length;t+=1){const n=parseInt(s[t],10);e+=t%2!==i?n:n>4?2*n-9:2*n}return e%10==0}(this.inputEl.value)?(this.showMsg("Invalid card number!"),this.msgEl.classList.add("validate-tooltip-invalid")):this.showMsg("Valid card number"):this.showMsg("Please insert a credit card number")}typeField(){this.msgEl&&this.msgEl.remove();const t=function(t){const e=String(t).replace(/\D/g,"");return e.match(/^2/)?"MIR":e.match(/^3[068]/)?"DinersClub":e.match(/^3[15]/)?"JCB":e.match(/^3[47]/)?"AmericanExpress":e.match(/^4/)?"Visa":e.match(/^5[0678]/)||e.match(/^6[37]/)?"Maestro":e.match(/^5[1-5]/)?"MasterCard":e.match(/^60/)?"Discover":e.match(/^62/)?"UnionPay":null}(this.inputEl.value);t!==this.lastDeterminedPaySystem&&(this.controlledEl.disableCardsExcept(t),this.lastDeterminedPaySystem=t)}}const i=new class{constructor(){this.element=null,this.container=null,this.logoCard=new e,this.validateForm=new s}create(){this.element=document.createElement("div"),this.element.classList.add("validator-container"),this.appendComponents()}bindToDOM(t){let e;if(e="string"==typeof t?document.querySelector(t):t,!(e instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=e,this.container.appendChild(this.element)}appendComponents(){this.logoCard.bindToDOM(this.element),this.validateForm.bindToDOM(this.element),this.validateForm.bindControlled(this.logoCard)}};i.create(),i.bindToDOM(".app")}();